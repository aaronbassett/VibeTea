# Phase 11 Retrospective: User Story 9 - Track Active Projects

## What Worked Well
- Following established tracker pattern from stats_tracker, skill_tracker, todo_tracker made implementation straightforward
- Comprehensive test suite (69 unit tests) provided confidence during integration
- Using `notify` crate's file system watching with debounce worked well for detecting project directory changes
- Separating concerns: ProjectTracker focuses on discovery, main.rs handles event dispatch

## What Didn't Work
- Initial cargo test flag placement (`cargo test -p vibetea-monitor --test-threads=1`) failed - the `--test-threads` flag must come after `--` separator
- The project path slug format (`-home-ubuntu-Projects-VibeTea`) requires careful parsing with edge cases for Windows paths

## Workarounds & Solutions
- Correct test command: `cargo test -p vibetea-monitor -- project_tracker --test-threads=1`
- Slug parsing handles both Unix (`-home-ubuntu-...`) and Windows (`-C--Users-...`) path formats
- Session activity detection via checking for `summary` event presence in JSONL files works reliably

## Packages & Dependencies
- `notify` crate continues to work well for file system watching across all trackers
- No new dependencies needed - existing types infrastructure supported ProjectActivityEvent

## Patterns & Code
- **Channel-based event dispatch**: `mpsc::channel<ProjectActivityEvent>` for async event communication
- **Optional tracker initialization**: Using `Option<ProjectTracker>` with warning on failure allows graceful degradation
- **Slug parsing function**: `parse_project_slug()` converts Claude's directory naming back to real paths
- **Session detection**: `has_summary_event()` reads JSONL and checks for completed sessions
- **Privacy-first**: Only project paths and session IDs transmitted, no code content

## For Next Time
- Consider extracting common tracker initialization pattern into a trait or helper
- Test flag placement is a common gotcha - document in CLAUDE.md
- The client handlers were already implemented from earlier phases - verify before implementing
